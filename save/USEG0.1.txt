@0
## DIVIDE BY 2

# THIS CELL IS
# COUNTING CYCLES
MOV RIGHT NIL
ADD 2
JRO -1

@1
MOV UP ACC
MOV ACC DOWN
MOV ACC LEFT

@2
# SUBTRACT POWERS
# OF 2 UNTIL WE
# OVER DO IT
#
# THEN JUST ADD
# HALF OF HOW MUCH
# WE MISSED NAIVE

@3


@4
MOV 1 ACC
LP: MOV ACC RIGHT
    SAV
    ADD ACC
    JRO RIGHT
    SWP
    ADD RIGHT
    MOV ACC DOWN

@5
MOV UP ACC

LP: SUB LEFT
    JGZ CO
ST: MOV ACC DOWN
    MOV 1 LEFT
    MOV ACC LEFT
    JMP NX
CO: MOV -3 LEFT
    JMP LP
NX:

@6
# NOTE: THE SUB 1
# AND ADD 2 ARE
# FOR EARLY JGZ
# E.G. 125, 14, 61
# BECAUSE THEY ARE
# ALL CLOSE POWERS
# OF 2
#
# THERE'S ALSO
# A 0 SPECIAL CASE
# FOR 255

@7


@8
MOV UP ACC
SUB 1

LP: ADD 1
    JRO RIGHT
    MOV ACC RIGHT

@9
ST: MOV UP ACC
    JEZ SP
ADD 2
JGZ DN
JEZ DN
LP: MOV -1 LEFT
    ADD 2
    JLZ LP
DN: MOV 1 LEFT
MOV LEFT RIGHT
JMP ST
SP: MOV 1 LEFT
    MOV LEFT ACC
    SUB 1
    MOV ACC RIGHT

@10
MOV LEFT DOWN

@11
