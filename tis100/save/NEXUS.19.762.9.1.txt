@0
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP
NOP

LP: MOV UP DOWN
    JMP LP

@1
## FAST INIT

@2


@3
# SKIP
MOV DOWN UP
JRO RIGHT
# ADD 1
MOV DOWN ACC
ADD 1
MOV ACC DOWN
# PUT BACK
MOV UP DOWN
JRO RIGHT

@4
ST: MOV 1 ACC
    ADD UP
    JEZ DN
    SAV
L1: MOV -1 LEFT
    SUB 1
    JNZ L1
    MOV 1 LEFT
    SWP
L2: MOV -1 LEFT
    SUB 1
    JNZ L2
    MOV -6 LEFT
    JMP ST
DN: MOV NIL DOWN

@5


@6
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV 0 RIGHT
MOV NIL DOWN

@7
MOV UP NIL
MOV LEFT NIL

# EMIT INDEX N
# TIMES FROM STACK
LO: MOV LEFT ACC
    JEZ NX
LI: MOV RIGHT DOWN
    MOV -1 RIGHT
    SUB 1
    JNZ LI
NX: MOV RIGHT NIL
    MOV 1 RIGHT
    JRO RIGHT
MOV -1 DOWN

@8
# INDEX ADDER
# NOTIFY WHEN
# IDX BECOMES
# 9 TO FINISH
LP: MOV ACC LEFT
    JRO LEFT
    SUB 9
    JNZ NX

DN: MOV 1 LEFT
    MOV DOWN NIL

NX: MOV -8 LEFT
    ADD 10